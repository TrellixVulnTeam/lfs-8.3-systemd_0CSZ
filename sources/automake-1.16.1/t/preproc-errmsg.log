Running from installcheck: no
Test Protocol: none
PATH = /sources/automake-1.16.1/bin:/sources/automake-1.16.1/t/ax:/bin:/usr/bin:/sbin:/usr/sbin:/tools/bin
++ pwd
/sources/automake-1.16.1/t/preproc-errmsg.dir
+ cat
+ :
+ mkdir sub sub/sub2
+ cat
+ cat
+ cat
+ aclocal-1.16 -Werror
+ AUTOMAKE_fails
+ AUTOMAKE_run -e 1
+ am__desc=
+ am__exp_rc=0
+ test 2 -gt 0
+ case $1 in
+ am__exp_rc=1
+ shift
+ shift
+ test 0 -gt 0
+ am__got_rc=0
+ automake-1.16 --foreign -Werror -Wall
+ am__got_rc=1
+ cat stderr
sub/sub2/more.mk:1: error: sub_sub2_UNDEFINED must be set with '=' before using '+='
Makefile.am:2:   'sub/local.mk' included from here
sub/local.mk:2:   'sub/sub2/more.mk' included from here
automake-1.16: warnings are treated as errors
sub/local.mk:3: error: 'sub-one.a' is not a standard library name
sub/local.mk:3: did you mean 'libsub-one.a'?
Makefile.am:2:   'sub/local.mk' included from here
sub/local.mk:3: error: 'sub-two.a' is not a standard library name
sub/local.mk:3: did you mean 'libsub-two.a'?
Makefile.am:2:   'sub/local.mk' included from here
sub/local.mk:4: warning: variable 'sub_x2_SOURCES' is defined but no program or
sub/local.mk:4: library has 'sub_x2' as canonical name (possible typo)
Makefile.am:2:   'sub/local.mk' included from here
Makefile.am:1: warning: variable 'x1_SOURCES' is defined but no program or
Makefile.am:1: library has 'x1' as canonical name (possible typo)
+ cat stdout
+ test none = none
+ test 1 -eq 1
+ return
+ cat
+ sed -e '/warnings are treated as errors/d' stderr
+ sed -e 's/: warning:/:/' t1
+ sed -e 's/: error:/:/' t2
+ sed -e 's/  */ /g' t3
+ diff expected obtained
+ :
+ am_exit_trap 0
+ exit_status=0
+ set +e
+ cd /sources/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 0 -eq 0
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ rm_rf_ t/preproc-errmsg.dir
+ test 1 -gt 0
+ /usr/bin/perl /sources/automake-1.16.1/t/ax/deltree.pl t/preproc-errmsg.dir
+ set +x
PASS t/preproc-errmsg.sh (exit status: 0)
